(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=Phaser;var s=e.n(t);class i extends s().Scene{constructor(){super("MenuScene")}preload(){this.load.image("fondo","Assets/MainMenu/inicio.jpg")}create(){this.add.image(400,300,"fondo"),this.add.text(400,100,"Charming Cats:\nGet-a-Home",{fontSize:"64px",color:"#ffffffff"}).setOrigin(.5);const e=this.add.text(400,300,"Local Play",{fontSize:"24px",color:"#1dd627ff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointover",()=>e.setStyle({fill:"#e7b14dff"})).on("pointout",()=>e.setStyle({fill:"#1dd627ff"})).on("pointerdown",()=>{this.scene.start("GameScene")})}}class a{constructor(e,t,s,i,a){this.id=t,this.scene=e,this.score=0,this.baseHeight=100,this.baseWidth=20,this.baseSpeed=300,this.scene.add.image(0,0,a),this.sprite=this.scene.physics.add.sprite(s,i,`paddle-${t}`),this.sprite.setImmovable(!0),this.sprite.setCollideWorldBounds(!0),this.sprite.body.allowGravity=!1}}class o extends s().Scene{constructor(){super("GameScene")}preload(){this.load.image("juego","Assets/Game/juego.jpg")}init(){this.players=new Map,this.inputsMapping=[],this.ball=null,this.isPaused=!1,this.escWasDown=!1}resume(){this.isPaused=!1}create(){this.add.image(400,300,"juego");for(let e=0;e<17;e++)this.add.rectangle(400,50*e+25,10,30,16777215);this.scoreLeft=this.add.text(100,50,"0",{fontSize:"48px",color:"#00ff00"}),this.scoreRight=this.add.text(700,50,"0",{fontSize:"48px",color:"#00ff00"}),this.createBounds(),this.createBall(),this.launchBall(),this.setUpPLayers(),this.players.forEach(e=>{this.physics.add.collider(this.ball,e.sprite)}),this.physics.add.overlap(this.ball,this.leftGoal,this.scoreRightGoal,null,this),this.physics.add.overlap(this.ball,this.rightGoal,this.scoreLeftGoal,null,this),this.escKey=this.input.keyboard.addKey(s().Input.Keyboard.KeyCodes.ESC)}setUpPLayers(){const e=new a(this,"player1",50,300,"Assets/Game/Gatos jugables/PJCats_gato negro.png"),t=new a(this,"player2",750,300,"Assets/Game/Gatos jugables/PJCats_gato alegre.png");this.players.set("player1",e),this.players.set("player2",t),this.inputsMapping=[{playerId:"player1",upKey:"W",downKey:"S"},{playerId:"player2",upKey:"UP",downKey:"DOWN"}],this.inputsMapping=this.inputsMapping.map(e=>({playerId:e.playerId,upKeyObj:this.input.keyboard.addKey(s().Input.Keyboard.KeyCodes[e.upKey]),downKeyObj:this.input.keyboard.addKey(s().Input.Keyboard.KeyCodes[e.downKey])}))}scoreRightGoal(){const e=this.players.get("player2");e.score+=1,this.scoreRight.setText(e.score.toString()),e.score>=10?this.endGame("player2"):this.resetBall()}scoreLeftGoal(){const e=this.players.get("player1");e.score+=1,this.scoreLeft.setText(e.score.toString()),e.score>=2?this.endGame("player1"):this.resetBall()}resetBall(){this.ball.setVelocity(0,0),this.ball.setPosition(400,300),this.time.delayedCall(1e3,()=>{this.launchBall()})}createBounds(){this.leftGoal=this.physics.add.sprite(0,300,null),this.leftGoal.setDisplaySize(10,600),this.leftGoal.body.setSize(10,600),this.leftGoal.setImmovable(!1),this.leftGoal.setVisible(!1),this.rightGoal=this.physics.add.sprite(800,300,null),this.rightGoal.setDisplaySize(10,600),this.rightGoal.body.setSize(10,600),this.rightGoal.setImmovable(!1),this.rightGoal.setVisible(!1)}createBall(){const e=this.add.graphics();e.fillStyle(16777215),e.fillCircle(8,8,8),e.generateTexture("ball",16,16),e.destroy(),this.ball=this.physics.add.image(400,300,"ball"),this.ball.setCollideWorldBounds(!0),this.ball.setBounce(1)}launchBall(){const e=s().Math.Between(-30,30),t=Math.random()<.5?1:-1;this.ball.setVelocity(600*Math.cos(s().Math.DegToRad(e))*t,600*Math.sin(s().Math.DegToRad(e)))}endGame(e){this.ball.setVelocity(0,0),this.players.forEach(e=>{e.sprite.setVelocity(0,0)}),this.physics.pause();const t="player1"===e?"Left Player Wins!!":"Right Player Wins!!";this.add.text(400,250,t,{fontSize:"64px",color:"#00ff00"}).setOrigin(.5);const s=this.add.text(400,350,"Return",{fontSize:"32px",color:"#00ff00"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setColor("#ff0000")).on("pointerout",()=>s.setColor("#00ff00")).on("pointerdown",()=>{this.scene.start("MenuScene")})}tooglePause(){const e=!this.isPaused;this.setPauseState(e)}setPauseState(e){this.isPaused=e,e?(this.scene.launch("PauseScene",{originalScene:"GameScene"}),this.scene.pause()):(this.scene.stop(),this.scene.resume("GameScene"))}update(){this.escKey.isDown&&this.tooglePause(),this.inputsMapping.forEach(e=>{const t=this.players.get(e.playerId);e.upKeyObj.isDown?t.sprite.setVelocityY(-t.baseSpeed):e.downKeyObj.isDown?t.sprite.setVelocityY(t.baseSpeed):t.sprite.setVelocityY(0)})}}class n extends s().Scene{constructor(){super("PauseScene")}create(e){this.add.text(400,160,"Paused",{fontSize:"64px"}).setOrigin(.5);const t=this.add.text(400,320,"Resume",{fontSize:"60px"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>t.setColor("#ff0000")).on("pointerout",()=>t.setColor("#00ff00")).on("pointerdown",()=>{this.scene.stop(),this.scene.resume(e.originalScene),this.scene.get(e.originalScene).resume()}),s=this.add.text(400,520,"Home",{fontSize:"60px"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setColor("#ff0000")).on("pointerout",()=>s.setColor("#00ff00")).on("pointerdown",()=>{this.scene.stop(),this.scene.stop(e.originalScene),this.scene.launch("MenuScene")})}}const r={type:s().AUTO,width:1200,height:700,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[i,o,n],backgroundColor:"#360246ff"};new(s().Game)(r)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUkwRyxFQUFRZCxTQUFTLFlBQ3RDNUYsR0FBRyxhQUFhLElBQUkwRyxFQUFRZCxTQUFTLFlBQ3JDNUYsR0FBRyxjQUFlLEtBQ2ZaLEtBQUtlLE1BQU0rRixPQUNYOUcsS0FBS2UsTUFBTStGLEtBQUtNLEVBQUtQLGVBQ3JCN0csS0FBS2UsTUFBTTZGLE9BQU8sY0FFMUIsRUN2QkosTUFBTXJDLEVBQVMsQ0FDWGdELEtBQU0sU0FDTkMsTUFBTyxLQUNQQyxPQUFRLElBQ1JDLE9BQVEsaUJBQ1IvRixRQUFTLENBQ0xnRyxRQUFTLFNBQ1RDLE9BQVEsQ0FDSkMsUUFBUyxDQUFDekcsRUFBRyxHQUNiMEcsT0FBTyxJQUlmL0csTUFBTyxDQUFDbkIsRUFBV29DLEVBQVdtRixHQUM5QlksZ0JBQWlCLGFBR1IsSUFBSSxVQUFZeEQsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByYWN0aWNlL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3ByYWN0aWNlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9wcmFjdGljZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3ByYWN0aWNlL2V4dGVybmFsIHZhciBcIlBoYXNlclwiIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL3NjZW5lL01lbnVTY2VuZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9lbnRpdGllcy9QYWRkbGUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvc2NlbmUvR2FtZVNjZW5lLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL3NjZW5lL1BhdXNlU2NlbmUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IFBoYXNlcjsiLCJpbXBvcnQgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNZW51U2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoJ01lbnVTY2VuZScpXHJcbiAgICB9XHJcblxyXG4gICAgcHJlbG9hZCgpe1xyXG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZm9uZG8nLCAnQXNzZXRzL01haW5NZW51L2luaWNpby5qcGcnKTtcclxuICAgIH1cclxuICAgXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UoNDAwLCAzMDAsICdmb25kbycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuYWRkLnRleHQoNDAwLDEwMCwgJ0NoYXJtaW5nIENhdHM6XFxuR2V0LWEtSG9tZScsXHJcbiAgICAgICAgeyAgIGZvbnRTaXplOiAnNjRweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZmZmJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCBsb2NhbEJ0biA9IHRoaXMuYWRkLnRleHQoNDAwLCAzMDAsICdMb2NhbCBQbGF5Jywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzI0cHgnLCBjb2xvcjogJyMxZGQ2MjdmZidcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KVxyXG4gICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7dXNlSGFuZEN1cnNvcjogdHJ1ZX0pXHJcbiAgICAgICAgLm9uKCdwb2ludG92ZXInLCAoKSA9PiBsb2NhbEJ0bi5zZXRTdHlsZSh7ZmlsbDogJyNlN2IxNGRmZid9KSlcclxuICAgICAgICAub24oJ3BvaW50b3V0JywgKCkgPT4gbG9jYWxCdG4uc2V0U3R5bGUoe2ZpbGw6ICcjMWRkNjI3ZmYnfSkpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpID0+e1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdHYW1lU2NlbmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgUGFkZGxlIHtcblxuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBpZCwgeCwgeSwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcblxuICAgICAgICB0aGlzLmJhc2VIZWlnaHQgPSAxMDA7XG4gICAgICAgIHRoaXMuYmFzZVdpZHRoID0gMjA7XG4gICAgICAgIHRoaXMuYmFzZVNwZWVkID0gMzAwO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQuaW1hZ2UoMCwgMCwgZGlyZWN0aW9uKTtcblxuXG4gICAgICAgIHRoaXMuc3ByaXRlID0gdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5zcHJpdGUoeCwgeSwgYHBhZGRsZS0ke2lkfWApO1xuICAgICAgICB0aGlzLnNwcml0ZS5zZXRJbW1vdmFibGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICB9XG59IiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcbmltcG9ydCB7IFBhZGRsZSB9IGZyb20gXCIuLi9lbnRpdGllcy9QYWRkbGUuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmV7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignR2FtZVNjZW5lJylcclxuICAgIH1cclxuXHJcbiAgICBwcmVsb2FkKCl7XHJcbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdqdWVnbycsICdBc3NldHMvR2FtZS9qdWVnby5qcGcnKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmlucHV0c01hcHBpbmcgPSBbXTtcclxuICAgICAgICB0aGlzLmJhbGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVzY1dhc0Rvd24gPSBmYWxzZTtcclxuICAgIH0gXHJcblxyXG4gICAgIHJlc3VtZSgpe1xyXG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5hZGQuaW1hZ2UoNDAwLCAzMDAsICdqdWVnbycpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTc7aSsrKXtcclxuICAgICAgICAgICAgdGhpcy5hZGQucmVjdGFuZ2xlKDQwMCwgaSAqIDUwICsgMjUsIDEwLCAzMCwgMHhmZmZmZmYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2NvcmUgdGV4dHNcclxuICAgICAgICB0aGlzLnNjb3JlTGVmdCA9IHRoaXMuYWRkLnRleHQoMTAwLCA1MCwgJzAnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwZmYwMCdcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLnNjb3JlUmlnaHQgPSB0aGlzLmFkZC50ZXh0KDcwMCwgNTAsICcwJywge1xyXG4gICAgICAgICAgICBmb250U2l6ZTogJzQ4cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMGZmMDAnXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLmNyZWF0ZUJvdW5kcygpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQmFsbCgpO1xyXG4gICAgICAgIHRoaXMubGF1bmNoQmFsbCgpO1xyXG4gICAgICAgIHRoaXMuc2V0VXBQTGF5ZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVycy5mb3JFYWNoKHBhZGRsZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5iYWxsLCBwYWRkbGUuc3ByaXRlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKHRoaXMuYmFsbCwgdGhpcy5sZWZ0R29hbCwgdGhpcy5zY29yZVJpZ2h0R29hbCwgbnVsbCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5vdmVybGFwKHRoaXMuYmFsbCwgdGhpcy5yaWdodEdvYWwsIHRoaXMuc2NvcmVMZWZ0R29hbCwgbnVsbCwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuZXNjS2V5PSB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRVNDKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVcFBMYXllcnMoKSB7XHJcbiAgICAgICAgY29uc3QgbGVmdFBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcywgJ3BsYXllcjEnLCA1MCwgMzAwLCdBc3NldHMvR2FtZS9HYXRvcyBqdWdhYmxlcy9QSkNhdHNfZ2F0byBuZWdyby5wbmcnKTtcclxuICAgICAgICBjb25zdCByaWdodFBhZGRsZSA9IG5ldyBQYWRkbGUodGhpcywgJ3BsYXllcjInLCA3NTAsIDMwMCwgJ0Fzc2V0cy9HYW1lL0dhdG9zIGp1Z2FibGVzL1BKQ2F0c19nYXRvIGFsZWdyZS5wbmcnKTtcclxuICAgICAgICB0aGlzLnBsYXllcnMuc2V0KCdwbGF5ZXIxJywgbGVmdFBhZGRsZSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzLnNldCgncGxheWVyMicsIHJpZ2h0UGFkZGxlKTtcclxuXHJcbiAgICAgICAgY29uc3QgSW5wdXRDb25maWcgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBsYXllcklkOiAncGxheWVyMScsXHJcbiAgICAgICAgICAgICAgICB1cEtleTogJ1cnLFxyXG4gICAgICAgICAgICAgICAgZG93bktleTogJ1MnLFxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGxheWVySWQ6ICdwbGF5ZXIyJyxcclxuICAgICAgICAgICAgICAgIHVwS2V5OiAnVVAnLFxyXG4gICAgICAgICAgICAgICAgZG93bktleTogJ0RPV04nLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmlucHV0c01hcHBpbmcgPSBJbnB1dENvbmZpZztcclxuICAgICAgICB0aGlzLmlucHV0c01hcHBpbmcgPSB0aGlzLmlucHV0c01hcHBpbmcubWFwKGNvbmZpZyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogY29uZmlnLnBsYXllcklkLFxyXG4gICAgICAgICAgICAgICAgdXBLZXlPYmo6IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcudXBLZXldKSxcclxuICAgICAgICAgICAgICAgIGRvd25LZXlPYmo6IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcuZG93bktleV0pLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2NvcmVSaWdodEdvYWwoKSB7XHJcbiAgICAgICAgY29uc3QgcGxheWVyMiA9IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjInKTtcclxuICAgICAgICBwbGF5ZXIyLnNjb3JlICs9IDE7XHJcbiAgICAgICAgdGhpcy5zY29yZVJpZ2h0LnNldFRleHQocGxheWVyMi5zY29yZS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAocGxheWVyMi5zY29yZSA+PTEwKXtcclxuICAgICAgICAgICAgdGhpcy5lbmRHYW1lKCdwbGF5ZXIyJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldEJhbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBzY29yZUxlZnRHb2FsKCkge1xyXG4gICAgICAgIGNvbnN0IHBsYXllcjEgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIxJyk7XHJcbiAgICAgICAgcGxheWVyMS5zY29yZSArPSAxO1xyXG4gICAgICAgIHRoaXMuc2NvcmVMZWZ0LnNldFRleHQocGxheWVyMS5zY29yZS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAocGxheWVyMS5zY29yZSA+PTIpe1xyXG4gICAgICAgICAgICB0aGlzLmVuZEdhbWUoJ3BsYXllcjEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0QmFsbCgpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0QmFsbCgpIHtcclxuICAgICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnNldFBvc2l0aW9uKDQwMCwgMzAwKTtcclxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMTAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxhdW5jaEJhbGwoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCb3VuZHMoKSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0R29hbCA9IHRoaXMucGh5c2ljcy5hZGQuc3ByaXRlKDAsIDMwMCwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5sZWZ0R29hbC5zZXREaXNwbGF5U2l6ZSgxMCwgNjAwKTtcclxuICAgICAgICB0aGlzLmxlZnRHb2FsLmJvZHkuc2V0U2l6ZSgxMCwgNjAwKTtcclxuICAgICAgICB0aGlzLmxlZnRHb2FsLnNldEltbW92YWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5sZWZ0R29hbC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwgPSB0aGlzLnBoeXNpY3MuYWRkLnNwcml0ZSg4MDAsIDMwMCwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuc2V0RGlzcGxheVNpemUoMTAsIDYwMCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuYm9keS5zZXRTaXplKDEwLCA2MDApO1xyXG4gICAgICAgIHRoaXMucmlnaHRHb2FsLnNldEltbW92YWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQmFsbCgpIHtcclxuICAgICAgICBjb25zdCBncmFwaGljcyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFN0eWxlKDB4ZmZmZmZmKTtcclxuICAgICAgICBncmFwaGljcy5maWxsQ2lyY2xlKDgsIDgsIDgpO1xyXG4gICAgICAgIGdyYXBoaWNzLmdlbmVyYXRlVGV4dHVyZSgnYmFsbCcsIDE2LCAxNik7XHJcbiAgICAgICAgZ3JhcGhpY3MuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGwgPSB0aGlzLnBoeXNpY3MuYWRkLmltYWdlKDQwMCwgMzAwLCAnYmFsbCcpO1xyXG4gICAgICAgIHRoaXMuYmFsbC5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnNldEJvdW5jZSgxKTtcclxuICAgIH1cclxuXHJcbiAgICBsYXVuY2hCYWxsKCkge1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gUGhhc2VyLk1hdGguQmV0d2VlbigtMzAsIDMwKTtcclxuICAgICAgICBjb25zdCBzcGVlZCA9IDYwMDtcclxuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gMSA6IC0xOyBcclxuXHJcbiAgICAgICAgdGhpcy5iYWxsLnNldFZlbG9jaXR5KFxyXG4gICAgICAgICAgICBNYXRoLmNvcyhQaGFzZXIuTWF0aC5EZWdUb1JhZChhbmdsZSkpICogc3BlZWQgKiBkaXJlY3Rpb24sXHJcbiAgICAgICAgICAgIE1hdGguc2luKFBoYXNlci5NYXRoLkRlZ1RvUmFkKGFuZ2xlKSkgKiBzcGVlZFxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBlbmRHYW1lKHdpbm5lcklkKXtcclxuICAgICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoMCwwKTtcclxuICAgICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaChwYWRkbGU9PiB7XHJcbiAgICAgICAgICAgIHBhZGRsZS5zcHJpdGUuc2V0VmVsb2NpdHkoMCwwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMucGh5c2ljcy5wYXVzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdpbm5lclRleHQgPSB3aW5uZXJJZD09PSdwbGF5ZXIxJz8nTGVmdCBQbGF5ZXIgV2lucyEhJzonUmlnaHQgUGxheWVyIFdpbnMhISc7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg0MDAsMjUwLCB3aW5uZXJUZXh0LCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOic2NHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDBmZjAwJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCBtZW51ID0gdGhpcy5hZGQudGV4dCg0MDAsMzUwLCdSZXR1cm4nLHtcclxuICAgICAgICAgICAgZm9udFNpemU6JzMycHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMGZmMDAnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6dHJ1ZX0pXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3ZlcicsKCk9Pm1lbnUuc2V0Q29sb3IoJyNmZjAwMDAnKSlcclxuICAgICAgICAub24oJ3BvaW50ZXJvdXQnLCgpPT5tZW51LnNldENvbG9yKCcjMDBmZjAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpPT57dGhpcy5zY2VuZS5zdGFydCgnTWVudVNjZW5lJyl9KTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICB0b29nbGVQYXVzZSgpe1xyXG4gICAgICAgIGNvbnN0IG5ld1BhdXNlZFN0YXRlID0gIXRoaXMuaXNQYXVzZWQ7XHJcbiAgICAgICAgdGhpcy5zZXRQYXVzZVN0YXRlKG5ld1BhdXNlZFN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQYXVzZVN0YXRlKGlzUGF1c2VkKXtcclxuICAgICAgICB0aGlzLmlzUGF1c2VkID0gaXNQYXVzZWQ7XHJcbiAgICAgICAgaWYoaXNQYXVzZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmxhdW5jaCgnUGF1c2VTY2VuZScsIHtvcmlnaW5hbFNjZW5lOidHYW1lU2NlbmUnfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCk7ICBcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZXN1bWUoJ0dhbWVTY2VuZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICBpZih0aGlzLmVzY0tleS5pc0Rvd24pe1xyXG4gICAgICAgICAgICB0aGlzLnRvb2dsZVBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5wdXRzTWFwcGluZy5mb3JFYWNoKG1hcHBpbmcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYWRkbGUgPSB0aGlzLnBsYXllcnMuZ2V0KG1hcHBpbmcucGxheWVySWQpO1xyXG4gICAgICAgICAgICAvL2xldCBkaXJlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAobWFwcGluZy51cEtleU9iai5pc0Rvd24pe1xyXG4gICAgICAgICAgICAgICAgcGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkoLXBhZGRsZS5iYXNlU3BlZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcHBpbmcuZG93bktleU9iai5pc0Rvd24pe1xyXG4gICAgICAgICAgICAgICAgcGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkocGFkZGxlLmJhc2VTcGVlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7cGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkoMCk7fVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuZXhwb3J0IGNsYXNzIFBhdXNlU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmV7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKCdQYXVzZVNjZW5lJyk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoZGF0YSl7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg0MDAsMTYwLCdQYXVzZWQnLHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICc2NHB4J1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VtZUJ0biA9IHRoaXMuYWRkLnRleHQoNDAwLDMyMCwgJ1Jlc3VtZScse1xyXG4gICAgICAgICAgICBmb250U2l6ZTonNjBweCdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXRJbnRlcmFjdGl2ZSh7dXNlSGFuZEN1cnNvcjp0cnVlfSlcclxuICAgICAgICAub24oJ3BvaW50ZXJvdmVyJywoKT0+cmVzdW1lQnRuLnNldENvbG9yKCcjZmYwMDAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywoKT0+cmVzdW1lQnRuLnNldENvbG9yKCcjMDBmZjAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlc3VtZShkYXRhLm9yaWdpbmFsU2NlbmUpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdldChkYXRhLm9yaWdpbmFsU2NlbmUpLnJlc3VtZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGhvbWVCdG4gPSB0aGlzLmFkZC50ZXh0KDQwMCw1MjAsICdIb21lJyx7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOic2MHB4J1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKHt1c2VIYW5kQ3Vyc29yOnRydWV9KVxyXG4gICAgICAgIC5vbigncG9pbnRlcm92ZXInLCgpPT5ob21lQnRuLnNldENvbG9yKCcjZmYwMDAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywoKT0+aG9tZUJ0bi5zZXRDb2xvcignIzAwZmYwMCcpKVxyXG4gICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0b3AoKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKGRhdGEub3JpZ2luYWxTY2VuZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUubGF1bmNoKCdNZW51U2NlbmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuXHJcbmltcG9ydCB7IE1lbnVTY2VuZSB9IGZyb20gJy4vc2NlbmUvTWVudVNjZW5lLmpzJztcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSAnLi9zY2VuZS9HYW1lU2NlbmUuanMnO1xyXG5pbXBvcnQgeyBQYXVzZVNjZW5lIH0gZnJvbSAnLi9zY2VuZS9QYXVzZVNjZW5lLmpzJztcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICAgIHR5cGU6IFBoYXNlci5BVVRPLFxyXG4gICAgd2lkdGg6IDEyMDAsXHJcbiAgICBoZWlnaHQ6IDcwMCxcclxuICAgIHBhcmVudDogJ2dhbWUtY29udGFpbmVyJyxcclxuICAgIHBoeXNpY3M6IHtcclxuICAgICAgICBkZWZhdWx0OiAnYXJjYWRlJyxcclxuICAgICAgICBhcmNhZGU6IHtcclxuICAgICAgICAgICAgZ3Jhdml0eToge3k6IDB9LFxyXG4gICAgICAgICAgICBkZWJ1ZzogZmFsc2VcclxuICAgICAgICB9IFxyXG4gICAgfSxcclxuXHJcbiAgICBzY2VuZTogW01lbnVTY2VuZSwgR2FtZVNjZW5lLCBQYXVzZVNjZW5lXSxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJyMzNjAyNDZmZidcclxufVxyXG5cclxuY29uc3QgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZShjb25maWcpOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlBoYXNlciIsIk1lbnVTY2VuZSIsImNvbnN0cnVjdG9yIiwic3VwZXIiLCJwcmVsb2FkIiwidGhpcyIsImxvYWQiLCJpbWFnZSIsImNyZWF0ZSIsImFkZCIsInRleHQiLCJmb250U2l6ZSIsImNvbG9yIiwic2V0T3JpZ2luIiwibG9jYWxCdG4iLCJzZXRJbnRlcmFjdGl2ZSIsInVzZUhhbmRDdXJzb3IiLCJvbiIsInNldFN0eWxlIiwiZmlsbCIsInNjZW5lIiwic3RhcnQiLCJQYWRkbGUiLCJpZCIsIngiLCJ5IiwiZGlyZWN0aW9uIiwic2NvcmUiLCJiYXNlSGVpZ2h0IiwiYmFzZVdpZHRoIiwiYmFzZVNwZWVkIiwic3ByaXRlIiwicGh5c2ljcyIsInNldEltbW92YWJsZSIsInNldENvbGxpZGVXb3JsZEJvdW5kcyIsImJvZHkiLCJhbGxvd0dyYXZpdHkiLCJHYW1lU2NlbmUiLCJpbml0IiwicGxheWVycyIsIk1hcCIsImlucHV0c01hcHBpbmciLCJiYWxsIiwiaXNQYXVzZWQiLCJlc2NXYXNEb3duIiwicmVzdW1lIiwiaSIsInJlY3RhbmdsZSIsInNjb3JlTGVmdCIsInNjb3JlUmlnaHQiLCJjcmVhdGVCb3VuZHMiLCJjcmVhdGVCYWxsIiwibGF1bmNoQmFsbCIsInNldFVwUExheWVycyIsImZvckVhY2giLCJwYWRkbGUiLCJjb2xsaWRlciIsIm92ZXJsYXAiLCJsZWZ0R29hbCIsInNjb3JlUmlnaHRHb2FsIiwicmlnaHRHb2FsIiwic2NvcmVMZWZ0R29hbCIsImVzY0tleSIsImlucHV0Iiwia2V5Ym9hcmQiLCJhZGRLZXkiLCJLZXlib2FyZCIsIktleUNvZGVzIiwiRVNDIiwibGVmdFBhZGRsZSIsInJpZ2h0UGFkZGxlIiwic2V0IiwicGxheWVySWQiLCJ1cEtleSIsImRvd25LZXkiLCJtYXAiLCJjb25maWciLCJ1cEtleU9iaiIsImRvd25LZXlPYmoiLCJwbGF5ZXIyIiwic2V0VGV4dCIsInRvU3RyaW5nIiwiZW5kR2FtZSIsInJlc2V0QmFsbCIsInBsYXllcjEiLCJzZXRWZWxvY2l0eSIsInNldFBvc2l0aW9uIiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2V0RGlzcGxheVNpemUiLCJzZXRTaXplIiwic2V0VmlzaWJsZSIsImdyYXBoaWNzIiwiZmlsbFN0eWxlIiwiZmlsbENpcmNsZSIsImdlbmVyYXRlVGV4dHVyZSIsImRlc3Ryb3kiLCJzZXRCb3VuY2UiLCJhbmdsZSIsIkJldHdlZW4iLCJNYXRoIiwicmFuZG9tIiwiY29zIiwiRGVnVG9SYWQiLCJzaW4iLCJ3aW5uZXJJZCIsInBhdXNlIiwid2lubmVyVGV4dCIsIm1lbnUiLCJzZXRDb2xvciIsInRvb2dsZVBhdXNlIiwibmV3UGF1c2VkU3RhdGUiLCJzZXRQYXVzZVN0YXRlIiwibGF1bmNoIiwib3JpZ2luYWxTY2VuZSIsInN0b3AiLCJ1cGRhdGUiLCJpc0Rvd24iLCJtYXBwaW5nIiwic2V0VmVsb2NpdHlZIiwiUGF1c2VTY2VuZSIsImRhdGEiLCJyZXN1bWVCdG4iLCJob21lQnRuIiwidHlwZSIsIndpZHRoIiwiaGVpZ2h0IiwicGFyZW50IiwiZGVmYXVsdCIsImFyY2FkZSIsImdyYXZpdHkiLCJkZWJ1ZyIsImJhY2tncm91bmRDb2xvciJdLCJzb3VyY2VSb290IjoiIn0=