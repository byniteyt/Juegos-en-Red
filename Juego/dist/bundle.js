(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=Phaser;var s=e.n(t);class i extends s().Scene{constructor(){super("MenuScene")}preload(){this.load.image("fondo","Assets/inicio.jpg")}create(){this.add.image(400,300,"fondo"),this.add.text(400,100,"Charming Cats:\nGet-a-Home",{fontSize:"64px",color:"#ffffffff"}).setOrigin(.5);const e=this.add.text(400,300,"Local Play",{fontSize:"24px",color:"#1dd627ff"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointover",()=>e.setStyle({fill:"#e7b14dff"})).on("pointout",()=>e.setStyle({fill:"#1dd627ff"})).on("pointerdown",()=>{this.scene.start("GameScene")})}}class a{constructor(e,t,s,i){this.id=t,this.scene=e,this.score=0,this.baseHeight=100,this.baseWidth=20,this.baseSpeed=300;const a=this.scene.add.graphics();a.fillStyle(65280),a.fillRect(0,0,this.baseWidth,this.baseHeight),a.generateTexture(`paddle-${t}`,this.baseWidth,this.baseHeight),a.destroy(),this.sprite=this.scene.physics.add.sprite(s,i,`paddle-${t}`),this.sprite.setImmovable(!0),this.sprite.setCollideWorldBounds(!0),this.sprite.body.allowGravity=!1}}class o extends s().Scene{constructor(){super("GameScene")}init(){this.players=new Map,this.inputsMapping=[],this.ball=null,this.isPaused=!1,this.escWasDown=!1}resume(){this.isPaused=!1}create(){for(let e=0;e<17;e++)this.add.rectangle(400,50*e+25,10,30,16777215);this.scoreLeft=this.add.text(100,50,"0",{fontSize:"48px",color:"#00ff00"}),this.scoreRight=this.add.text(700,50,"0",{fontSize:"48px",color:"#00ff00"}),this.createBounds(),this.createBall(),this.launchBall(),this.setUpPLayers(),this.players.forEach(e=>{this.physics.add.collider(this.ball,e.sprite)}),this.physics.add.overlap(this.ball,this.leftGoal,this.scoreRightGoal,null,this),this.physics.add.overlap(this.ball,this.rightGoal,this.scoreLeftGoal,null,this),this.escKey=this.input.keyboard.addKey(s().Input.Keyboard.KeyCodes.ESC)}setUpPLayers(){const e=new a(this,"player1",50,300),t=new a(this,"player2",750,300);this.players.set("player1",e),this.players.set("player2",t),this.inputsMapping=[{playerId:"player1",upKey:"W",downKey:"S"},{playerId:"player2",upKey:"UP",downKey:"DOWN"}],this.inputsMapping=this.inputsMapping.map(e=>({playerId:e.playerId,upKeyObj:this.input.keyboard.addKey(s().Input.Keyboard.KeyCodes[e.upKey]),downKeyObj:this.input.keyboard.addKey(s().Input.Keyboard.KeyCodes[e.downKey])}))}scoreRightGoal(){const e=this.players.get("player2");e.score+=1,this.scoreRight.setText(e.score.toString()),e.score>=10?this.endGame("player2"):this.resetBall()}scoreLeftGoal(){const e=this.players.get("player1");e.score+=1,this.scoreLeft.setText(e.score.toString()),e.score>=2?this.endGame("player1"):this.resetBall()}resetBall(){this.ball.setVelocity(0,0),this.ball.setPosition(400,300),this.time.delayedCall(1e3,()=>{this.launchBall()})}createBounds(){this.leftGoal=this.physics.add.sprite(0,300,null),this.leftGoal.setDisplaySize(10,600),this.leftGoal.body.setSize(10,600),this.leftGoal.setImmovable(!1),this.leftGoal.setVisible(!1),this.rightGoal=this.physics.add.sprite(800,300,null),this.rightGoal.setDisplaySize(10,600),this.rightGoal.body.setSize(10,600),this.rightGoal.setImmovable(!1),this.rightGoal.setVisible(!1)}createBall(){const e=this.add.graphics();e.fillStyle(16777215),e.fillCircle(8,8,8),e.generateTexture("ball",16,16),e.destroy(),this.ball=this.physics.add.image(400,300,"ball"),this.ball.setCollideWorldBounds(!0),this.ball.setBounce(1)}launchBall(){const e=s().Math.Between(-30,30),t=Math.random()<.5?1:-1;this.ball.setVelocity(600*Math.cos(s().Math.DegToRad(e))*t,600*Math.sin(s().Math.DegToRad(e)))}endGame(e){this.ball.setVelocity(0,0),this.players.forEach(e=>{e.sprite.setVelocity(0,0)}),this.physics.pause();const t="player1"===e?"Left Player Wins!!":"Right Player Wins!!";this.add.text(400,250,t,{fontSize:"64px",color:"#00ff00"}).setOrigin(.5);const s=this.add.text(400,350,"Return",{fontSize:"32px",color:"#00ff00"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setColor("#ff0000")).on("pointerout",()=>s.setColor("#00ff00")).on("pointerdown",()=>{this.scene.start("MenuScene")})}tooglePause(){const e=!this.isPaused;this.setPauseState(e)}setPauseState(e){this.isPaused=e,e?(this.scene.launch("PauseScene",{originalScene:"GameScene"}),this.scene.pause()):(this.scene.stop(),this.scene.resume("GameScene"))}update(){this.escKey.isDown&&this.tooglePause(),this.inputsMapping.forEach(e=>{const t=this.players.get(e.playerId);e.upKeyObj.isDown?t.sprite.setVelocityY(-t.baseSpeed):e.downKeyObj.isDown?t.sprite.setVelocityY(t.baseSpeed):t.sprite.setVelocityY(0)})}}class r extends s().Scene{constructor(){super("PauseScene")}create(e){this.add.text(400,160,"Paused",{fontSize:"64px"}).setOrigin(.5);const t=this.add.text(400,320,"Resume",{fontSize:"60px"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>t.setColor("#ff0000")).on("pointerout",()=>t.setColor("#00ff00")).on("pointerdown",()=>{this.scene.stop(),this.scene.resume(e.originalScene),this.scene.get(e.originalScene).resume()}),s=this.add.text(400,520,"Home",{fontSize:"60px"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>s.setColor("#ff0000")).on("pointerout",()=>s.setColor("#00ff00")).on("pointerdown",()=>{this.scene.stop(),this.scene.stop(e.originalScene),this.scene.launch("MenuScene")})}}const l={type:s().AUTO,width:800,height:600,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[i,o,r],backgroundColor:"#360246ff"};new(s().Game)(l)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUNDLGVBQWMsSUFDL0NDLEdBQUcsY0FBYyxJQUFJMkcsRUFBUWQsU0FBUyxZQUN0QzdGLEdBQUcsYUFBYSxJQUFJMkcsRUFBUWQsU0FBUyxZQUNyQzdGLEdBQUcsY0FBZSxLQUNmWixLQUFLZSxNQUFNZ0csT0FDWC9HLEtBQUtlLE1BQU1nRyxLQUFLTSxFQUFLUCxlQUNyQjlHLEtBQUtlLE1BQU04RixPQUFPLGNBRTFCLEVDdkJKLE1BQU1sQyxFQUFTLENBQ1g2QyxLQUFNLFNBQ05DLE1BQU8sSUFDUEMsT0FBUSxJQUNSQyxPQUFRLGlCQUNSNUYsUUFBUyxDQUNMNkYsUUFBUyxTQUNUQyxPQUFRLENBQ0pDLFFBQVMsQ0FBQzFHLEVBQUcsR0FDYjJHLE9BQU8sSUFJZmhILE1BQU8sQ0FBQ25CLEVBQVd3QyxFQUFXZ0YsR0FDOUJZLGdCQUFpQixhQUdSLElBQUksVUFBWXJELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wcmFjdGljZS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9wcmFjdGljZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2Uvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmFjdGljZS9leHRlcm5hbCB2YXIgXCJQaGFzZXJcIiIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9zY2VuZS9NZW51U2NlbmUuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY2UvLi9zcmMvZW50aXRpZXMvUGFkZGxlLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL3NjZW5lL0dhbWVTY2VuZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljZS8uL3NyYy9zY2VuZS9QYXVzZVNjZW5lLmpzIiwid2VicGFjazovL3ByYWN0aWNlLy4vc3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSBQaGFzZXI7IiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWVudVNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdNZW51U2NlbmUnKVxyXG4gICAgfVxyXG5cclxuICAgIHByZWxvYWQoKXtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2ZvbmRvJywgJ0Fzc2V0cy9pbmljaW8uanBnJyk7XHJcbiAgICB9XHJcbiAgIFxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIHRoaXMuYWRkLmltYWdlKDQwMCwgMzAwLCAnZm9uZG8nKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmFkZC50ZXh0KDQwMCwxMDAsICdDaGFybWluZyBDYXRzOlxcbkdldC1hLUhvbWUnLFxyXG4gICAgICAgIHsgICBmb250U2l6ZTogJzY0cHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmZmZidcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9jYWxCdG4gPSB0aGlzLmFkZC50ZXh0KDQwMCwgMzAwLCAnTG9jYWwgUGxheScsIHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICcyNHB4JywgY29sb3I6ICcjMWRkNjI3ZmYnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSlcclxuICAgICAgICAuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6IHRydWV9KVxyXG4gICAgICAgIC5vbigncG9pbnRvdmVyJywgKCkgPT4gbG9jYWxCdG4uc2V0U3R5bGUoe2ZpbGw6ICcjZTdiMTRkZmYnfSkpXHJcbiAgICAgICAgLm9uKCdwb2ludG91dCcsICgpID0+IGxvY2FsQnRuLnNldFN0eWxlKHtmaWxsOiAnIzFkZDYyN2ZmJ30pKVxyXG4gICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKSA9PntcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnR2FtZVNjZW5lJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFBhZGRsZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgaWQsIHgsIHkpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuXG4gICAgICAgIHRoaXMuYmFzZUhlaWdodCA9IDEwMDtcbiAgICAgICAgdGhpcy5iYXNlV2lkdGggPSAyMDtcbiAgICAgICAgdGhpcy5iYXNlU3BlZWQgPSAzMDA7XG5cbiAgICAgICAgY29uc3QgZ3JhcGhpY3MgPSB0aGlzLnNjZW5lLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBncmFwaGljcy5maWxsU3R5bGUoMHgwMGZmMDApO1xuICAgICAgICBncmFwaGljcy5maWxsUmVjdCgwLCAwLCB0aGlzLmJhc2VXaWR0aCwgdGhpcy5iYXNlSGVpZ2h0KTtcbiAgICAgICAgZ3JhcGhpY3MuZ2VuZXJhdGVUZXh0dXJlKGBwYWRkbGUtJHtpZH1gLCB0aGlzLmJhc2VXaWR0aCwgdGhpcy5iYXNlSGVpZ2h0KTtcbiAgICAgICAgZ3JhcGhpY3MuZGVzdHJveSgpO1xuXG4gICAgICAgIHRoaXMuc3ByaXRlID0gdGhpcy5zY2VuZS5waHlzaWNzLmFkZC5zcHJpdGUoeCwgeSwgYHBhZGRsZS0ke2lkfWApO1xuICAgICAgICB0aGlzLnNwcml0ZS5zZXRJbW1vdmFibGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ByaXRlLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTtcbiAgICAgICAgdGhpcy5zcHJpdGUuYm9keS5hbGxvd0dyYXZpdHkgPSBmYWxzZTtcbiAgICB9XG59IiwiaW1wb3J0IFBoYXNlciBmcm9tIFwicGhhc2VyXCI7XHJcbmltcG9ydCB7IFBhZGRsZSB9IGZyb20gXCIuLi9lbnRpdGllcy9QYWRkbGUuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmV7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcignR2FtZVNjZW5lJylcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIHRoaXMucGxheWVycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmlucHV0c01hcHBpbmcgPSBbXTtcclxuICAgICAgICB0aGlzLmJhbGwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVzY1dhc0Rvd24gPSBmYWxzZTtcclxuICAgIH0gXHJcblxyXG4gICAgIHJlc3VtZSgpe1xyXG4gICAgICAgIHRoaXMuaXNQYXVzZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGUoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNztpKyspe1xyXG4gICAgICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoNDAwLCBpICogNTAgKyAyNSwgMTAsIDMwLCAweGZmZmZmZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTY29yZSB0ZXh0c1xyXG4gICAgICAgIHRoaXMuc2NvcmVMZWZ0ID0gdGhpcy5hZGQudGV4dCgxMDAsIDUwLCAnMCcsIHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICc0OHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDBmZjAwJ1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmVSaWdodCA9IHRoaXMuYWRkLnRleHQoNzAwLCA1MCwgJzAnLCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOiAnNDhweCcsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIzAwZmYwMCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuY3JlYXRlQm91bmRzKCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVCYWxsKCk7XHJcbiAgICAgICAgdGhpcy5sYXVuY2hCYWxsKCk7XHJcbiAgICAgICAgdGhpcy5zZXRVcFBMYXllcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzLmZvckVhY2gocGFkZGxlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcih0aGlzLmJhbGwsIHBhZGRsZS5zcHJpdGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLm92ZXJsYXAodGhpcy5iYWxsLCB0aGlzLmxlZnRHb2FsLCB0aGlzLnNjb3JlUmlnaHRHb2FsLCBudWxsLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnBoeXNpY3MuYWRkLm92ZXJsYXAodGhpcy5iYWxsLCB0aGlzLnJpZ2h0R29hbCwgdGhpcy5zY29yZUxlZnRHb2FsLCBudWxsLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5lc2NLZXk9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5FU0MpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVwUExheWVycygpIHtcclxuICAgICAgICBjb25zdCBsZWZ0UGFkZGxlID0gbmV3IFBhZGRsZSh0aGlzLCAncGxheWVyMScsIDUwLCAzMDApO1xyXG4gICAgICAgIGNvbnN0IHJpZ2h0UGFkZGxlID0gbmV3IFBhZGRsZSh0aGlzLCAncGxheWVyMicsIDc1MCwgMzAwKTtcclxuICAgICAgICB0aGlzLnBsYXllcnMuc2V0KCdwbGF5ZXIxJywgbGVmdFBhZGRsZSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJzLnNldCgncGxheWVyMicsIHJpZ2h0UGFkZGxlKTtcclxuXHJcbiAgICAgICAgY29uc3QgSW5wdXRDb25maWcgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBsYXllcklkOiAncGxheWVyMScsXHJcbiAgICAgICAgICAgICAgICB1cEtleTogJ1cnLFxyXG4gICAgICAgICAgICAgICAgZG93bktleTogJ1MnLFxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGxheWVySWQ6ICdwbGF5ZXIyJyxcclxuICAgICAgICAgICAgICAgIHVwS2V5OiAnVVAnLFxyXG4gICAgICAgICAgICAgICAgZG93bktleTogJ0RPV04nLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmlucHV0c01hcHBpbmcgPSBJbnB1dENvbmZpZztcclxuICAgICAgICB0aGlzLmlucHV0c01hcHBpbmcgPSB0aGlzLmlucHV0c01hcHBpbmcubWFwKGNvbmZpZyA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogY29uZmlnLnBsYXllcklkLFxyXG4gICAgICAgICAgICAgICAgdXBLZXlPYmo6IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcudXBLZXldKSxcclxuICAgICAgICAgICAgICAgIGRvd25LZXlPYmo6IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlc1tjb25maWcuZG93bktleV0pLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2NvcmVSaWdodEdvYWwoKSB7XHJcbiAgICAgICAgY29uc3QgcGxheWVyMiA9IHRoaXMucGxheWVycy5nZXQoJ3BsYXllcjInKTtcclxuICAgICAgICBwbGF5ZXIyLnNjb3JlICs9IDE7XHJcbiAgICAgICAgdGhpcy5zY29yZVJpZ2h0LnNldFRleHQocGxheWVyMi5zY29yZS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAocGxheWVyMi5zY29yZSA+PTEwKXtcclxuICAgICAgICAgICAgdGhpcy5lbmRHYW1lKCdwbGF5ZXIyJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldEJhbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBzY29yZUxlZnRHb2FsKCkge1xyXG4gICAgICAgIGNvbnN0IHBsYXllcjEgPSB0aGlzLnBsYXllcnMuZ2V0KCdwbGF5ZXIxJyk7XHJcbiAgICAgICAgcGxheWVyMS5zY29yZSArPSAxO1xyXG4gICAgICAgIHRoaXMuc2NvcmVMZWZ0LnNldFRleHQocGxheWVyMS5zY29yZS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAocGxheWVyMS5zY29yZSA+PTIpe1xyXG4gICAgICAgICAgICB0aGlzLmVuZEdhbWUoJ3BsYXllcjEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0QmFsbCgpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0QmFsbCgpIHtcclxuICAgICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoMCwgMCk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnNldFBvc2l0aW9uKDQwMCwgMzAwKTtcclxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMTAwMCwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmxhdW5jaEJhbGwoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCb3VuZHMoKSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0R29hbCA9IHRoaXMucGh5c2ljcy5hZGQuc3ByaXRlKDAsIDMwMCwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5sZWZ0R29hbC5zZXREaXNwbGF5U2l6ZSgxMCwgNjAwKTtcclxuICAgICAgICB0aGlzLmxlZnRHb2FsLmJvZHkuc2V0U2l6ZSgxMCwgNjAwKTtcclxuICAgICAgICB0aGlzLmxlZnRHb2FsLnNldEltbW92YWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5sZWZ0R29hbC5zZXRWaXNpYmxlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwgPSB0aGlzLnBoeXNpY3MuYWRkLnNwcml0ZSg4MDAsIDMwMCwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuc2V0RGlzcGxheVNpemUoMTAsIDYwMCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuYm9keS5zZXRTaXplKDEwLCA2MDApO1xyXG4gICAgICAgIHRoaXMucmlnaHRHb2FsLnNldEltbW92YWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yaWdodEdvYWwuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQmFsbCgpIHtcclxuICAgICAgICBjb25zdCBncmFwaGljcyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XHJcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFN0eWxlKDB4ZmZmZmZmKTtcclxuICAgICAgICBncmFwaGljcy5maWxsQ2lyY2xlKDgsIDgsIDgpO1xyXG4gICAgICAgIGdyYXBoaWNzLmdlbmVyYXRlVGV4dHVyZSgnYmFsbCcsIDE2LCAxNik7XHJcbiAgICAgICAgZ3JhcGhpY3MuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGwgPSB0aGlzLnBoeXNpY3MuYWRkLmltYWdlKDQwMCwgMzAwLCAnYmFsbCcpO1xyXG4gICAgICAgIHRoaXMuYmFsbC5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5iYWxsLnNldEJvdW5jZSgxKTtcclxuICAgIH1cclxuXHJcbiAgICBsYXVuY2hCYWxsKCkge1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gUGhhc2VyLk1hdGguQmV0d2VlbigtMzAsIDMwKTtcclxuICAgICAgICBjb25zdCBzcGVlZCA9IDYwMDtcclxuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBNYXRoLnJhbmRvbSgpIDwgMC41ID8gMSA6IC0xOyBcclxuXHJcbiAgICAgICAgdGhpcy5iYWxsLnNldFZlbG9jaXR5KFxyXG4gICAgICAgICAgICBNYXRoLmNvcyhQaGFzZXIuTWF0aC5EZWdUb1JhZChhbmdsZSkpICogc3BlZWQgKiBkaXJlY3Rpb24sXHJcbiAgICAgICAgICAgIE1hdGguc2luKFBoYXNlci5NYXRoLkRlZ1RvUmFkKGFuZ2xlKSkgKiBzcGVlZFxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBlbmRHYW1lKHdpbm5lcklkKXtcclxuICAgICAgICB0aGlzLmJhbGwuc2V0VmVsb2NpdHkoMCwwKTtcclxuICAgICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaChwYWRkbGU9PiB7XHJcbiAgICAgICAgICAgIHBhZGRsZS5zcHJpdGUuc2V0VmVsb2NpdHkoMCwwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMucGh5c2ljcy5wYXVzZSgpO1xyXG4gICAgICAgIGNvbnN0IHdpbm5lclRleHQgPSB3aW5uZXJJZD09PSdwbGF5ZXIxJz8nTGVmdCBQbGF5ZXIgV2lucyEhJzonUmlnaHQgUGxheWVyIFdpbnMhISc7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg0MDAsMjUwLCB3aW5uZXJUZXh0LCB7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOic2NHB4JyxcclxuICAgICAgICAgICAgY29sb3I6ICcjMDBmZjAwJ1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG5cclxuICAgICAgICBjb25zdCBtZW51ID0gdGhpcy5hZGQudGV4dCg0MDAsMzUwLCdSZXR1cm4nLHtcclxuICAgICAgICAgICAgZm9udFNpemU6JzMycHgnLFxyXG4gICAgICAgICAgICBjb2xvcjogJyMwMGZmMDAnXHJcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0SW50ZXJhY3RpdmUoe3VzZUhhbmRDdXJzb3I6dHJ1ZX0pXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3ZlcicsKCk9Pm1lbnUuc2V0Q29sb3IoJyNmZjAwMDAnKSlcclxuICAgICAgICAub24oJ3BvaW50ZXJvdXQnLCgpPT5tZW51LnNldENvbG9yKCcjMDBmZjAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpPT57dGhpcy5zY2VuZS5zdGFydCgnTWVudVNjZW5lJyl9KTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICB0b29nbGVQYXVzZSgpe1xyXG4gICAgICAgIGNvbnN0IG5ld1BhdXNlZFN0YXRlID0gIXRoaXMuaXNQYXVzZWQ7XHJcbiAgICAgICAgdGhpcy5zZXRQYXVzZVN0YXRlKG5ld1BhdXNlZFN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQYXVzZVN0YXRlKGlzUGF1c2VkKXtcclxuICAgICAgICB0aGlzLmlzUGF1c2VkID0gaXNQYXVzZWQ7XHJcbiAgICAgICAgaWYoaXNQYXVzZWQpe1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmxhdW5jaCgnUGF1c2VTY2VuZScsIHtvcmlnaW5hbFNjZW5lOidHYW1lU2NlbmUnfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKCk7ICBcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZXN1bWUoJ0dhbWVTY2VuZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKXtcclxuICAgICAgICBpZih0aGlzLmVzY0tleS5pc0Rvd24pe1xyXG4gICAgICAgICAgICB0aGlzLnRvb2dsZVBhdXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5wdXRzTWFwcGluZy5mb3JFYWNoKG1hcHBpbmcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwYWRkbGUgPSB0aGlzLnBsYXllcnMuZ2V0KG1hcHBpbmcucGxheWVySWQpO1xyXG4gICAgICAgICAgICAvL2xldCBkaXJlY3Rpb24gPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAobWFwcGluZy51cEtleU9iai5pc0Rvd24pe1xyXG4gICAgICAgICAgICAgICAgcGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkoLXBhZGRsZS5iYXNlU3BlZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcHBpbmcuZG93bktleU9iai5pc0Rvd24pe1xyXG4gICAgICAgICAgICAgICAgcGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkocGFkZGxlLmJhc2VTcGVlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7cGFkZGxlLnNwcml0ZS5zZXRWZWxvY2l0eVkoMCk7fVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUGhhc2VyIGZyb20gXCJwaGFzZXJcIjtcclxuZXhwb3J0IGNsYXNzIFBhdXNlU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmV7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKCdQYXVzZVNjZW5lJyk7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoZGF0YSl7XHJcbiAgICAgICAgdGhpcy5hZGQudGV4dCg0MDAsMTYwLCdQYXVzZWQnLHtcclxuICAgICAgICAgICAgZm9udFNpemU6ICc2NHB4J1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VtZUJ0biA9IHRoaXMuYWRkLnRleHQoNDAwLDMyMCwgJ1Jlc3VtZScse1xyXG4gICAgICAgICAgICBmb250U2l6ZTonNjBweCdcclxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXRJbnRlcmFjdGl2ZSh7dXNlSGFuZEN1cnNvcjp0cnVlfSlcclxuICAgICAgICAub24oJ3BvaW50ZXJvdmVyJywoKT0+cmVzdW1lQnRuLnNldENvbG9yKCcjZmYwMDAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywoKT0+cmVzdW1lQnRuLnNldENvbG9yKCcjMDBmZjAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyZG93bicsICgpPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlc3VtZShkYXRhLm9yaWdpbmFsU2NlbmUpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmdldChkYXRhLm9yaWdpbmFsU2NlbmUpLnJlc3VtZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGhvbWVCdG4gPSB0aGlzLmFkZC50ZXh0KDQwMCw1MjAsICdIb21lJyx7XHJcbiAgICAgICAgICAgIGZvbnRTaXplOic2MHB4J1xyXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpLnNldEludGVyYWN0aXZlKHt1c2VIYW5kQ3Vyc29yOnRydWV9KVxyXG4gICAgICAgIC5vbigncG9pbnRlcm92ZXInLCgpPT5ob21lQnRuLnNldENvbG9yKCcjZmYwMDAwJykpXHJcbiAgICAgICAgLm9uKCdwb2ludGVyb3V0JywoKT0+aG9tZUJ0bi5zZXRDb2xvcignIzAwZmYwMCcpKVxyXG4gICAgICAgIC5vbigncG9pbnRlcmRvd24nLCAoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnN0b3AoKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5zdG9wKGRhdGEub3JpZ2luYWxTY2VuZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUubGF1bmNoKCdNZW51U2NlbmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcclxuXHJcbmltcG9ydCB7IE1lbnVTY2VuZSB9IGZyb20gJy4vc2NlbmUvTWVudVNjZW5lLmpzJztcclxuaW1wb3J0IHsgR2FtZVNjZW5lIH0gZnJvbSAnLi9zY2VuZS9HYW1lU2NlbmUuanMnO1xyXG5pbXBvcnQgeyBQYXVzZVNjZW5lIH0gZnJvbSAnLi9zY2VuZS9QYXVzZVNjZW5lLmpzJztcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICAgIHR5cGU6IFBoYXNlci5BVVRPLFxyXG4gICAgd2lkdGg6IDgwMCxcclxuICAgIGhlaWdodDogNjAwLFxyXG4gICAgcGFyZW50OiAnZ2FtZS1jb250YWluZXInLFxyXG4gICAgcGh5c2ljczoge1xyXG4gICAgICAgIGRlZmF1bHQ6ICdhcmNhZGUnLFxyXG4gICAgICAgIGFyY2FkZToge1xyXG4gICAgICAgICAgICBncmF2aXR5OiB7eTogMH0sXHJcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZVxyXG4gICAgICAgIH0gXHJcbiAgICB9LFxyXG5cclxuICAgIHNjZW5lOiBbTWVudVNjZW5lLCBHYW1lU2NlbmUsIFBhdXNlU2NlbmVdLFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzM2MDI0NmZmJ1xyXG59XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IFBoYXNlci5HYW1lKGNvbmZpZyk7Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGUiLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiUGhhc2VyIiwiTWVudVNjZW5lIiwiY29uc3RydWN0b3IiLCJzdXBlciIsInByZWxvYWQiLCJ0aGlzIiwibG9hZCIsImltYWdlIiwiY3JlYXRlIiwiYWRkIiwidGV4dCIsImZvbnRTaXplIiwiY29sb3IiLCJzZXRPcmlnaW4iLCJsb2NhbEJ0biIsInNldEludGVyYWN0aXZlIiwidXNlSGFuZEN1cnNvciIsIm9uIiwic2V0U3R5bGUiLCJmaWxsIiwic2NlbmUiLCJzdGFydCIsIlBhZGRsZSIsImlkIiwieCIsInkiLCJzY29yZSIsImJhc2VIZWlnaHQiLCJiYXNlV2lkdGgiLCJiYXNlU3BlZWQiLCJncmFwaGljcyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZ2VuZXJhdGVUZXh0dXJlIiwiZGVzdHJveSIsInNwcml0ZSIsInBoeXNpY3MiLCJzZXRJbW1vdmFibGUiLCJzZXRDb2xsaWRlV29ybGRCb3VuZHMiLCJib2R5IiwiYWxsb3dHcmF2aXR5IiwiR2FtZVNjZW5lIiwiaW5pdCIsInBsYXllcnMiLCJNYXAiLCJpbnB1dHNNYXBwaW5nIiwiYmFsbCIsImlzUGF1c2VkIiwiZXNjV2FzRG93biIsInJlc3VtZSIsImkiLCJyZWN0YW5nbGUiLCJzY29yZUxlZnQiLCJzY29yZVJpZ2h0IiwiY3JlYXRlQm91bmRzIiwiY3JlYXRlQmFsbCIsImxhdW5jaEJhbGwiLCJzZXRVcFBMYXllcnMiLCJmb3JFYWNoIiwicGFkZGxlIiwiY29sbGlkZXIiLCJvdmVybGFwIiwibGVmdEdvYWwiLCJzY29yZVJpZ2h0R29hbCIsInJpZ2h0R29hbCIsInNjb3JlTGVmdEdvYWwiLCJlc2NLZXkiLCJpbnB1dCIsImtleWJvYXJkIiwiYWRkS2V5IiwiS2V5Ym9hcmQiLCJLZXlDb2RlcyIsIkVTQyIsImxlZnRQYWRkbGUiLCJyaWdodFBhZGRsZSIsInNldCIsInBsYXllcklkIiwidXBLZXkiLCJkb3duS2V5IiwibWFwIiwiY29uZmlnIiwidXBLZXlPYmoiLCJkb3duS2V5T2JqIiwicGxheWVyMiIsInNldFRleHQiLCJ0b1N0cmluZyIsImVuZEdhbWUiLCJyZXNldEJhbGwiLCJwbGF5ZXIxIiwic2V0VmVsb2NpdHkiLCJzZXRQb3NpdGlvbiIsInRpbWUiLCJkZWxheWVkQ2FsbCIsInNldERpc3BsYXlTaXplIiwic2V0U2l6ZSIsInNldFZpc2libGUiLCJmaWxsQ2lyY2xlIiwic2V0Qm91bmNlIiwiYW5nbGUiLCJCZXR3ZWVuIiwiZGlyZWN0aW9uIiwiTWF0aCIsInJhbmRvbSIsImNvcyIsIkRlZ1RvUmFkIiwic2luIiwid2lubmVySWQiLCJwYXVzZSIsIndpbm5lclRleHQiLCJtZW51Iiwic2V0Q29sb3IiLCJ0b29nbGVQYXVzZSIsIm5ld1BhdXNlZFN0YXRlIiwic2V0UGF1c2VTdGF0ZSIsImxhdW5jaCIsIm9yaWdpbmFsU2NlbmUiLCJzdG9wIiwidXBkYXRlIiwiaXNEb3duIiwibWFwcGluZyIsInNldFZlbG9jaXR5WSIsIlBhdXNlU2NlbmUiLCJkYXRhIiwicmVzdW1lQnRuIiwiaG9tZUJ0biIsInR5cGUiLCJ3aWR0aCIsImhlaWdodCIsInBhcmVudCIsImRlZmF1bHQiLCJhcmNhZGUiLCJncmF2aXR5IiwiZGVidWciLCJiYWNrZ3JvdW5kQ29sb3IiXSwic291cmNlUm9vdCI6IiJ9